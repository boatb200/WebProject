<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ผลงาน — รีโนเวทคอนโด | TRONGJAI DESIGN & CONSTRUCTION</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    :root { color-scheme: light dark; }
    body { margin:0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif; line-height:1.6; color:#111; }
    header { position: relative; background:#004aad; color:#fff; padding:40px 16px; text-align:center; }
    nav { background:#222; position:sticky; top:0; z-index:10; padding:10px; text-align:center; }
    nav a { color:#fff; text-decoration:none; padding:8px 12px; border-radius:8px; display:inline-block; }
    nav a:hover, nav a:focus-visible { background:#333; outline:none; }
    .wrap { max-width:1100px; margin:24px auto; padding:0 16px; }
    .back-link { display:inline-block; margin-bottom:16px; text-decoration:none; color:#004aad; }
    .back-link:hover, .back-link:focus-visible { text-decoration:underline; outline:none; }

    .gallery { display:grid; gap:12px; }
    .gallery-main {
      border:1px solid #e6e9ef; border-radius:12px; overflow:hidden;
      background:#000; display:flex; align-items:center; justify-content:center; min-height:320px;
    }
    .gallery-main img,
    .gallery-main video {
      width:100%; height:auto; max-height:70vh; object-fit:contain; display:block; aspect-ratio:16/9;
    }

    .thumbs {
      display:grid; grid-auto-flow:column; grid-auto-columns:max-content;
      gap:10px; overflow-x:auto; padding:6px 2px; scroll-snap-type:x mandatory;
    }
    .thumb { width:100px; height:70px; object-fit:cover; cursor:pointer;
      border-radius:8px; border:2px solid transparent; scroll-snap-align:start;
      transition: transform .15s ease, border-color .15s ease, opacity .15s ease; opacity:.95;
    }
    .thumb:hover, .thumb:focus-visible { transform:scale(1.03); opacity:1; outline:none; border-color:#7fa9ff; }
    .thumb.is-active { border-color:#004aad; }
    @media (min-width:768px){ .thumb{ width:120px; height:80px; } }

    .specs { display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); margin-top:12px; }
    .specs .card { border:1px solid #e6e9ef; border-radius:12px; padding:12px; background:#fff; }
    .specs .card h4 { margin:0 0 6px; color:#004aad; }

    .cta { display:inline-block; margin-top:8px; padding:10px 16px; border-radius:10px;
      background:#004aad; color:#fff; text-decoration:none; font-weight:600; }
    .cta:hover, .cta:focus-visible { background:#0c57d6; outline:none; }

    footer { margin-top:32px; padding:16px; text-align:center; color:#666; border-top:1px solid #e6e9ef; }
  </style>
</head>
<body>
  <header>
    <h1>รีโนเวทคอนโด</h1>
    <p>ผลงานการออกแบบและก่อสร้างโดย TRONGJAI DESIGN & CONSTRUCTION</p>
  </header>

  <nav aria-label="หลัก">
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
    <a href="services.html">Services</a>
    <a href="contact.html">Contact</a>
    <a href="Performance.html">Performance</a>
  </nav>

  <section class="wrap">
    <a class="back-link" href="Performance.html">← กลับไปหน้าผลงาน</a>

    <div class="gallery" aria-label="แกลเลอรีผลงาน">
      <div class="gallery-main" id="galleryMain">
        <img id="mainMedia" src="work3/work3.1.jpg" alt="ภาพรีโนเวทคอนโด มุมมองที่ 1">
      </div>

      <div class="thumbs" id="thumbs">
        <img class="thumb is-active" src="work3/work3.1.jpg" alt="ตัวอย่างมุมที่ 1" data-full="work3/work3.1.jpg" loading="lazy" />
        <img class="thumb" src="work3/work3.2.jpg" alt="ตัวอย่างมุมที่ 2" data-full="work3/work3.2.jpg" loading="lazy" />
        <img class="thumb" src="work3/work3.3.jpg" alt="ตัวอย่างมุมที่ 3" data-full="work3/work3.3.jpg" loading="lazy" />
        <img class="thumb" src="work3/work3.4.jpg" alt="ตัวอย่างมุมที่ 4" data-full="work3/work3.4.jpg" loading="lazy" />
        <img class="thumb" src="work3/work3.5.jpg" alt="ตัวอย่างมุมที่ 5" data-full="work3/work3.5.jpg" loading="lazy" />

        <!-- วิดีโอเป็น thumbnail: ใส่ poster ให้เห็นรูปปก -->
        <video class="thumb"
               muted
               playsinline
               webkit-playsinline
               loop
               preload="metadata"
               poster="video/re1_poster.png"
               data-full="video/re1.mp4"
               aria-label="วิดีโองานรีโนเวท (คลิกเพื่อเล่น)">
          <source src="video/re1.mp4" type="video/mp4">
        </video>

        <video class="thumb"
       muted
       playsinline
       webkit-playsinline
       loop
       preload="metadata"
       poster="video/re2_poster.png"
       data-full="video/re2.mp4"
       aria-label="วิดีโอรีโนเวท (คลิกเพื่อเล่น)">
  <source src="video/re2.mp4" type="video/mp4">
</video>

      </div>
    </div>
  </section>

  <section class="wrap">
    <h2>รายละเอียดโครงการ</h2>
    <p>เราประเมินหน้างานตึก 5 ชั้น (ชั้นละ ~20 ยูนิต) อย่างละเอียด …</p>
    <div class="specs">
      <div class="card"><h4>ขนาดพื้นที่</h4><p>ที่ดิน ~60 ตร.วา / พื้นที่ใช้สอยประมาณ 180 ตร.ม.</p></div>
      <div class="card"><h4>ฟังก์ชันหลักในหอพัก</h4><p>1 ห้องนอน · 1 ห้องน้ำ</p></div>
      <div class="card"><h4>วัสดุเด่น</h4><p>พื้นไม้ลามิเนตเกรดกันชื้น · กระจกกันความร้อน · สุขภัณฑ์ประหยัดน้ำ</p></div>
      <div class="card"><h4>สไตล์</h4><p>Modern Minimal · โทนไม้ธรรมชาติ · แสงธรรมชาติเต็มพื้นที่</p></div>
    </div>
    <p style="margin-top:16px">สนใจแบบนี้ ติดต่อขอคำปรึกษาฟรี</p>
    <a class="cta" href="contact.html">ติดต่อสอบถาม</a>
  </section>

  <footer>© 2025 TRONGJAI DESIGN & CONSTRUCTION · สงวนลิขสิทธิ์</footer>

  <script>
  (() => {
    const mainWrap = document.getElementById('galleryMain');
    const thumbs = Array.from(document.querySelectorAll('.thumbs .thumb'));
    let currentIndex = 0;

    function makeVideo(src, poster) {
      const v = document.createElement('video');
      // ใส่แอตทริบิวต์/พร็อพที่จำเป็น "ก่อน" ระบุ src
      v.setAttribute('controls', '');       // ให้ควบคุมได้
      v.setAttribute('autoplay', '');       // เพิ่มทั้งแอตทริบิวต์และพร็อพ
      v.autoplay = true;
      v.muted = true;                       // ต้อง mute เพื่อ autoplay
      v.setAttribute('muted', '');          // iOS บางเวอร์ชันต้องมีแอตทริบิวต์
      v.setAttribute('playsinline', '');
      v.setAttribute('webkit-playsinline', '');
      v.playsInline = true;

      v.preload = 'metadata';
      if (poster) v.poster = poster;

      v.src = src;                          // ใส่ src หลังจากตั้งค่า flags แล้ว

      // บางครั้งเบราว์เซอร์ยังต้องเรียก play() ด้วย gesture จำลอง
      // เรียกแล้วกลืน error ไป เพื่อไม่ให้คอนโซลแดง
      v.addEventListener('canplay', () => {
        const p = v.play();
        if (p && typeof p.catch === 'function') p.catch(() => {});
      });

      return v;
    }

    function renderMainFrom(src) {
      mainWrap.innerHTML = '';

      if (typeof src === 'string' && src.toLowerCase().endsWith('.mp4')) {
        // ใส่ poster เดียวกับ thumbnail ถ้ามีไฟล์
        const posterGuess = 'videos/re1_poster.jpg';
        const v = makeVideo(src, posterGuess);
        mainWrap.appendChild(v);
      } else {
        const img = document.createElement('img');
        img.src = src;
        img.alt = 'ภาพรีโนเวทคอนโด — ภาพหลัก';
        mainWrap.appendChild(img);
      }
    }

    function fullSrcFromThumb(el) {
      if (el.dataset.full) return el.dataset.full;
      if (el.tagName === 'VIDEO') {
        const s = el.querySelector('source');
        if (s && s.src) return s.src;
      }
      return el.src;
    }

    function setActive(i) {
      currentIndex = i;
      const full = fullSrcFromThumb(thumbs[i]);
      renderMainFrom(full);
      thumbs.forEach(t => t.classList.remove('is-active'));
      thumbs[i].classList.add('is-active');
      thumbs[i].scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
    }

    // bind events
    thumbs.forEach((t, i) => {
      t.tabIndex = 0;
      t.addEventListener('click', () => setActive(i));
      t.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); setActive(i); }
      });
      if (t.tagName === 'IMG') t.addEventListener('error', () => t.style.display = 'none');
    });

    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') setActive((currentIndex + 1) % thumbs.length);
      if (e.key === 'ArrowLeft')  setActive((currentIndex - 1 + thumbs.length) % thumbs.length);
    });

    // ถ้ารูปหลักเออเรอร์ ให้ข้ามไปถัดไป
    const firstMain = document.getElementById('mainMedia');
    if (firstMain && firstMain.tagName === 'IMG') {
      firstMain.addEventListener('error', () => setActive((currentIndex + 1) % thumbs.length));
    }
  })();
  </script>
</body>
</html>
